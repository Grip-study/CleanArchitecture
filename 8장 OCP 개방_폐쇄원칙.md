# 8장 COP 개방 폐쇄원칙

> 소프트웨어 개체는 확장에는 열려 있어야 하고, 변경에는 닫혀있어야 한다.
>
> 소프트웨어 아키텍처를 공부하는 가장 근본적인 이유.
<br>

### 기존 기능에 기능이 추가가 되었을 때, 가장 적은양의 코드로 유지보수 할 수 있게 하는것이 목표.

 - 서로 다른 목적으로 변경되는 요소를 잘 분리. (SRP)
 
 - 이 요소 사이의 의존성을 체계화함. (DIP)

<br>

### 생각해보자

재무제표를 보여주는 시스템을 만들어보자

1. 재무데이터를 분석하여 웹, 프린트 출력이 가능하도록

2. SRP를 적용하여 데이터의 흐름을 만들어보자
   
     재무데이터를 생성 -> 제무데이터를 분석 -> 분석된 데이터를 웹 or 프린트 출력
 
3. DIP를 이용하여 의존성을 분리해보자
     
     그림 8.2 ,(칠판)
     
<br>
### !!

그림을 보면 모든 컴포넌트의 관계는 단방향이다. 

즉 최종적으로 모든 것에 의존하지 않는 무언가가 있다.(아무것도 모르는 애가 있다.)

최종적으로 모든 변경(나말고)으로부터 보호가 되는 컴포넌트가 있으며 해당컴포넌트는 사수님이 정해줄거다.
 
그림에서는 Interactor가 제일 수준이 높지만, 만드는 것에 따라 데이터베이스가 제일 높을 수도 있고...

<br>

### 아니 아무것도 모르는데 어떻게 데이터를 전달해 주냐!

그림 8.2를 보자 Controller 컴포넌트에 FinancialReportPresenter가 있다.

    아니 얘는 왜 Presenter컴포넌트에 있지 않고 여기에 있는거야 라고 생각이 들겠지만, 
    
    이 클래스는 인터페이스이다.

그렇다. 

Controller는 FinancialReportPresenter를 구현하고있는 구현체를 주입받아(어떻게 구현했는지 모름)

데이터를 전달해준다.

<br>

## 결론

OCP의 목표는 시스템을 확장하기 쉬운 동시에 변경으로 인해 시스템이 많은 영향을 받지 않도록 하는 것.

그러기 위해서는 컴포넌트단위로 잘 분리하고, 수준에 따른 의존성 계층구조를 만들어지도록 해야한다.
